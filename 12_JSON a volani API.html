<!DOCTYPE html>
<html lang="cz"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>kodim.cz</title>
  <style data-vue-ssr-id="499c037c:0">@import url(https://fonts.googleapis.com/css?family=Montserrat:400,700,900|Roboto+Mono:400,700&display=fallback&subset=latin-ext);</style><style data-vue-ssr-id="499c037c:1">*{box-sizing:border-box}html{font-family:"Montserrat", sans-serif;font-size:15px}body{margin:0;color:#444;background-color:#f9f9f9}.container{width:100%;margin-left:auto;margin-right:auto}@media only screen and (min-width: 576px){.container{width:540px}}@media only screen and (min-width: 768px){.container{width:720px}}@media only screen and (min-width: 992px){.container{width:960px}}.btn{border:none;outline:none;border-radius:1rem;padding:0.5rem 1rem;text-align:center;text-decoration:none;color:black;box-shadow:0 0 10px #ddd;transition:400ms}.btn:hover{transform:scale(1.1)}.btn-open{background-color:#ffec88}
</style><style data-vue-ssr-id="54541dba:0">.hljs{display:block;overflow-x:auto;padding:0.5em;background:#222222;color:#C0C0C0}.hljs-keyword{color:#FFB871;font-weight:bold}.hljs-built_in{color:#FFB871}.hljs-literal{color:#FF8080}.hljs-symbol{color:#58E55A}.hljs-comment{color:#5B995B}.hljs-string{color:#FFFF00}.hljs-number{color:#FF8080}.hljs-attribute,.hljs-selector-tag,.hljs-doctag,.hljs-name,.hljs-bullet,.hljs-code,.hljs-addition,.hljs-regexp,.hljs-variable,.hljs-template-variable,.hljs-link,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-type,.hljs-selector-id,.hljs-selector-class,.hljs-quote,.hljs-template-tag,.hljs-deletion,.hljs-title,.hljs-section,.hljs-function,.hljs-meta-keyword,.hljs-meta,.hljs-subst{color:#C0C0C0}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}.article-outline{margin:2rem 3rem 0 0}.arrow-left{background-color:#ffec88;background-size:contain;width:2.5rem;height:2.5rem;border-radius:1.25rem;box-shadow:0 0 10px #ddd;background-image:url(/assets/img/arrow-left-5d2511.svg)}.arrow-right{background-color:#ffec88;background-size:contain;width:2.5rem;height:2.5rem;border-radius:1.25rem;box-shadow:0 0 10px #ddd;background-image:url(/assets/img/arrow-right-b02d21.svg)}.chapter-link{padding-left:1rem}.chapter-link a{text-decoration:none;color:black;font-size:1.2rem;font-weight:bold}.chapter-link a:hover{text-decoration:underline}.article-links{display:flex;margin-top:1rem}.article-links-filler{flex:1}.article-link{display:flex;align-items:center}.article-link a{text-decoration:none;color:black}.article-link a:hover{text-decoration:underline}.article-link--backward{margin-left:-1.25rem}.article-link--backward a{margin-left:2.75rem}.article-link--forward{margin-right:-1.25rem}.article-link--forward a{margin-right:2.75rem}.toc-link{display:block;width:100%;text-decoration:none;color:black;padding:0.5rem 1rem}.toc-link:hover{background-color:#f6f6f6}.exrc-section-title{margin-top:1rem !important;margin-bottom:0rem !important}.exrc-bonuses{padding:2rem 4rem;color:white;background-color:orange;margin-bottom:1rem}.exrc-bonuses__head{font-size:1.2rem;font-weight:bold;margin-bottom:1rem}.article-section{padding:2rem 0}.warn-section{background-color:#e2252b;color:white}.text-section table tr:nth-child(even){background-color:#e8e8e8}.exercises-section{background-color:#ffec88}.block-image{margin:3rem 0}.block-image img{display:block;width:100%;height:auto}.fig{display:block;margin:2rem auto;height:auto}li>.fig{margin:1rem auto}.fig-100{width:100%}.fig-90{width:90%}.fig-80{width:80%}.fig-70{width:70%}.fig-60{width:60%}.fig-50{width:50%}table{margin:2rem auto}table thead{border-bottom:2px solid #333}table td{padding:0.5rem}
</style><style data-vue-ssr-id="34f8141e:0">.article-head{padding:0 4rem}.article-head__title{display:flex;align-items:baseline;font-size:1.8rem;font-weight:bold;margin-left:-6rem}.article-head__title h1{font-size:100%}.article-head__num{width:4rem;height:4rem;line-height:4rem;text-align:center;background-color:#ffec88;box-shadow:0 0 10px #ddd;border-radius:2rem;margin-right:2rem}.aside{display:none;width:320px;position:fixed;z-index:1;overflow-x:hidden;padding-top:20px}@media only screen and (min-width: 992px){.aside{display:block}}.article{margin:0rem 0 6rem 0;background-color:white;padding-top:2rem;box-shadow:0 0 10px #ddd;line-height:150%;border-radius:1rem}@media only screen and (min-width: 992px){.article{margin:0rem 0 6rem 320px}}.article .text-section>p,.article .text-section>ul,.article .text-section>ol,.article .text-section>dl{margin-left:4rem;margin-right:4rem}.article dt,.article dd{margin-bottom:0.5rem}.article h2,.article h3,.article h4{padding:1rem 4rem}.article .anchor{opacity:0;transition:250ms;text-decoration:none;color:#869af5;margin-left:-1.7rem}.article h2{margin-top:3rem;margin-bottom:1rem;font-size:1.6rem;font-weight:900}.article h2 .anchor{margin-left:-1.7rem}.article h3{margin-top:1rem;margin-bottom:0rem}.article h3 .anchor{margin-left:-1.2rem}.article h2:hover .anchor,.article h3:hover .anchor{opacity:1;margin-left:0}.article p{margin-top:0;margin-bottom:1rem;hyphens:manual}.article li{margin-bottom:0.5rem}.article .text-section:first-child p:first-child:first-letter{float:left;font-size:5rem;line-height:4rem;padding-top:0.3rem;padding-right:0.5rem}.article em{background-color:#d1ebf1;padding:0rem 0.5rem;border-radius:10px}.article pre,.article code,.article var{font-family:"Roboto Mono"}.article pre{background-color:#555;color:white;padding:1rem 4rem;margin:2rem 0;overflow-x:auto}.article var{font-style:normal;color:blue}.article kbd{font-family:"Montserrat";background-color:#fff;border:1px solid #888;border-radius:4px;padding:0rem 0.5rem}.term{display:inline;position:relative;font-style:italic;overflow:visible}.term__icon{display:inline-block;vertical-align:middle;width:15px;height:15px;margin-left:0.5rem;margin-bottom:2px;margin-right:0;background-image:url(/assets/img/english-9a71e2.png);background-size:contain;background-repeat:no-repeat}.term__cs{background-color:#d1ebf1;padding:0rem 0rem 0rem 0.5rem;border-radius:10px;white-space:pre;cursor:default}.term__en{position:absolute;top:-2rem;left:0rem;background-color:#444;color:white;padding:0rem 0.5rem;border-radius:5px;opacity:0;visibility:hidden;z-index:1;white-space:pre;transition:500ms}.term:hover .term__en{visibility:visible;opacity:1}
</style><style data-vue-ssr-id="3c9796f4:0">.page{display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr auto;min-height:100vh}.footer{padding:2rem 0;background-color:#dce7f4}
</style><style data-vue-ssr-id="2fdd37c8:0">.page-logo{display:flex;align-items:center;text-decoration:none;color:black}.page-logo__icon{width:2rem;height:2rem;background-image:url(/assets/img/kodim-icon-d3361c.svg);background-size:contain}.page-logo__title{font-size:1.2rem;font-weight:bold;margin-left:0.5rem}.navbar{padding:1rem 0}
</style><style data-vue-ssr-id="6f27289b:0">.exercise__head{display:flex;margin-left:-1.5rem}.exercise__num{width:3rem;height:3rem;line-height:3rem;background-color:white;box-shadow:0 0 10px #ddd;border-radius:1.5rem;text-align:center}.exercise__title{display:flex;align-items:baseline;flex:1;font-size:1.2rem;font-weight:bold;margin-left:0rem}.exercise__title h3{font-size:100%;padding-left:2.5rem;margin-bottom:0.5rem}.exercise__demand{margin-top:2rem;padding-right:4rem;text-align:right}.exercise__body>p,.exercise__body>ul,.exercise__body>ol,.exercise__body>dl{margin-left:4rem;margin-right:4rem}.exercise table tr:nth-child(even){background-color:#ffe664}.demand{min-width:70px;height:14px;background-size:contain;background-position-x:right;background-repeat:no-repeat;background-size:70px 14px}.demand--1{background-image:url(/assets/img/demand1-32b0be.svg)}.demand--2{background-image:url(/assets/img/demand2-3d6156.svg)}.demand--3{background-image:url(/assets/img/demand3-6ddf4a.svg)}.demand--4{background-image:url(/assets/img/demand4-377dc5.svg)}.demand--5{background-image:url(/assets/img/demand5-9e0206.svg)}.demand-text{font-size:0.8rem;font-weight:bold}
</style></head>
  <body data-gr-c-s-loaded="true">
    <div data-server-rendered="true" class="page"><header><div class="navbar container"><a href="http://nove.kodim.cz/" class="page-logo router-link-active"><div class="page-logo__icon"></div> <div class="page-logo__title">KÃ³dÃ­m.cz</div></a></div> </header> <main class="main"><div class="container"><aside class="aside"><div class="chapter-link"><a href="http://nove.kodim.cz/czechitas/daweb" class="router-link-active">PokroÄilÃ½ JavaScript</a></div> <nav class="article-outline"><a href="#format-json" class="toc-link">FormÃ¡t JSON</a><a href="#volani-api" class="toc-link">VolÃ¡nÃ­ API</a><a href="#cviceni-volani-api" class="toc-link">CviÄenÃ­ - volÃ¡nÃ­ API</a><a href="#google-sheets-api" class="toc-link">Google Sheets API</a><a href="#zapis-pomoci-api" class="toc-link">ZÃ¡pis pomocÃ­ API</a><a href="#cviceni-zapis-pomoci-api" class="toc-link">CviÄenÃ­ - zÃ¡pis pomocÃ­ API</a><a href="#dobrovolne-ulozky-na-doma" class="toc-link">DobrovolnÃ© ÃºloÅ¾ky na doma</a></nav></aside> <article class="article"><div class="article-head"><div class="article-head__title"><div class="article-head__num">3</div> <h1>JSON a volÃ¡nÃ­ API</h1></div> <div class="article-head__brief">NauÄÃ­me se, jak vyuÅ¾Ã­vat veÅ™ejnÃ¡ API k tomu, abychom zÃ­skali strukturovanÃ© data pro naÅ¡e aplikace.</div></div> <div class="article-links"><div class="article-link article-link--backward"><div class="arrow-left"></div> <a href="http://nove.kodim.cz/czechitas/daweb/pokrocily-js/objekty-data">
        Objekty jako data, vlastnÃ­ DOM elementy
      </a></div> <div class="article-links-filler"></div> <div class="article-link article-link--forward"><a href="http://nove.kodim.cz/czechitas/daweb/pokrocily-js/zaklady-oop">
        ZÃ¡klady objektovÃ©ho programovÃ¡nÃ­
      </a> <div class="arrow-right"></div></div></div> <div class="article-body"><!-- base href="http://nove.kodim.cz/czechitas/daweb/pokrocily-js/volani-api/" --> <section class="article-section text-section"><p>VÄ›tÅ¡ina
 webovÃ½ch aplikacÃ­ pracuje s daty, kterÃ¡ jsou uloÅ¾ena na nÄ›jakÃ©m 
vzdÃ¡lenÃ©m serveru. Pokud chceme s daty na nÄ›jakÃ©m serveru pracovat, 
server musÃ­ poskytovat takzvanÃ© API (<i>Application Programming Interface</i>).
 VÄ›tÅ¡ina API poskytuje data ve formÃ¡tu JSON. Nejprve si tedy povÃ­me o 
tomto formÃ¡tu a pak se nauÄÃ­me si data stahovat pomocÃ­ JavaScriptu.</p>
<h2 id="format-json"><a class="anchor" href="#format-json">Â¶</a> FormÃ¡t JSON</h2>
<p>Podle vÄ›tÅ¡iny modernÃ­ch doporuÄenÃ­ je lepÅ¡Ã­ v JavaScriptu pouÅ¾Ã­vat v 
Å™etÄ›zcÃ­ch jednoduchÃ© uvozovky. V poÄÃ¡tcÃ­ch JavaScriptu vÅ¡ak bylo bÄ›Å¾nÃ© 
pouÅ¾Ã­vat spÃ­Å¡e dvojitÃ©. Pokud v naÅ¡ich objektech schvÃ¡lnÄ› uzavÅ™eme 
vÅ¡echny klÃ­Äe a Å™etÄ›zce do dvojitÃ½ch uvozovek i tam, kde by to jinak 
nebylo potÅ™eba, dostaneme reprezentaci zapsanou takto.</p>
<!-- prettier-ignore-start -->
<pre><code class="language-js"><span class="hljs-keyword">const</span> row = {
  <span class="hljs-string">"name"</span>: {
    <span class="hljs-string">"first"</span>: <span class="hljs-string">"Petr"</span>,
    <span class="hljs-string">"last"</span>: <span class="hljs-string">"BÃ­lek"</span>
  },
  <span class="hljs-string">"product"</span>: {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"PracÃ­ prÃ¡Å¡ek"</span>,
    <span class="hljs-string">"amount"</span>: <span class="hljs-number">1.5</span>,
    <span class="hljs-string">"unit"</span>: <span class="hljs-string">"kg"</span>
  },
  <span class="hljs-string">"price"</span>: <span class="hljs-number">240</span>
};
</code></pre>
<!-- prettier-ignore-end -->
<p>Toto je z hlediska JavaSriptu naprosto korektnÃ­ zÃ¡pis. Vznikne tak 
zcela stejnÃ½ objekt, jak ten, kterÃ½ by vznikl bez pouÅ¾itÃ­ uvozovek kolem
 klÃ­ÄÅ¯. Tento zpÅ¯sob zÃ¡pisu mÃ¡ svÃ© speciÃ¡lnÃ­ jmÃ©no - <i>JavaScript Object Notation</i>, nebo-li <i>JSON</i>.
 Za dobu existence JavaScriptu se tento zÃ¡pis rozÅ¡Ã­Å™il po celÃ©m 
internetu a dnes jde o nejpouÅ¾Ã­vanÄ›jÅ¡Ã­ formÃ¡t pro vÃ½mÄ›nu dat. Pokud si 
tedy budeme chtÃ­t stÃ¡hnout data z nÄ›jakÃ©ho API, dostaneme je vÄ›tÅ¡inou 
prÃ¡vÄ› ve formÃ¡tu JSON.</p>
<h2 id="volani-api"><a class="anchor" href="#volani-api">Â¶</a> VolÃ¡nÃ­ API</h2>
<p>K tomu, abychom mohli pracovat s API je potÅ™eba si detailnÄ›ji popsat,
 jak funguje komunikace s webovÃ½m serverem. Pokud po webovÃ©m serveru 
nÄ›co chceme, napÅ™Ã­klad HTML strÃ¡nku nebo nÄ›jakÃ¡ data, musÃ­me odeslat 
takzvanÃ½ 
          <span class="term">
            <span class="term__cs">HTTP poÅ¾adavek<span class="term__icon"></span></span>
            <span class="term__en">HTTP request</span>
          </span>
        . KaÅ¾dÃ½ poÅ¾adavek musÃ­ bÃ½t zacÃ­lenÃ½ na nÄ›jakou URL adresu. Adresy URL majÃ­ nÃ¡sledujÃ­cÃ­ formÃ¡t.</p>
<pre><code>protokol://adresa_serveru/cesta?parametr1=hodnota1&amp;parametr2=hodnota2
</code></pre>
<p>Protokol je vÄ›tÅ¡inou <code>http</code> nebo <code>https</code>. Adresa serveru mÅ¯Å¾e bÃ½t napÅ™Ã­klad <code>www.google.com</code>.
 Za adresou serveru nÃ¡sleduje cesta, kterÃ¡ specifikuje kam v rÃ¡mci 
serveru se mÃ¡ poÅ¾adavek odeslat. Za otaznÃ­kem se pÃ­Å¡ou takzvanÃ© 
parametry, kterÃ© dÃ¡le upÅ™esÅˆujÃ­ poÅ¾adavek.</p>
<p>Takto napÅ™Ã­klad vypadÃ¡ adresa poÅ¾adavku na server <code>www.google.com</code>, kterÃ½ spustÃ­ vyhledÃ¡vÃ¡nÃ­.</p>
<pre><code>https://www.google.com/search?q=praha&amp;sourceid=chrome
</code></pre>
<p>Cesta v poÅ¾adavku je tedy <code>/search</code>, parametr <code>q</code> udÃ¡vÃ¡, Å¾e se mÃ¡ vyhledat slovo <code>praha</code> a parametr <code>sourceid</code> Å™Ã­kÃ¡, Å¾e se ptÃ¡me z prohlÃ­Å¾eÄe <code>chrome</code>. Tuto adresu mÅ¯Å¾ete normÃ¡lnÄ› zadat do prohlÃ­Å¾eÄe a uvidÃ­te vÃ½sledky vyhledÃ¡vÃ¡nÃ­.</p>
<h3 id="dotazy-na-api"><a class="anchor" href="#dotazy-na-api">Â¶</a> Dotazy na API</h3>
<p>Dotazy na API fungujÃ­ naprosto stejnÄ› jako jsme popsali vÃ½Å¡e. Jedno z
 nejjednoduÅ¡Å¡Ã­ch API, kterÃ© si mÅ¯Å¾ete sami vyzkouÅ¡et, poskytuje 
informace o tom, kdo mÃ¡ kterÃ½ den v jakÃ© zemi svÃ¡tek. Pokud chcete 
vÄ›dÄ›t, kdo mÃ¡ zrovna dneska svÃ¡tek v ÄŒeskÃ© republice, vloÅ¾te do 
prohlÃ­Å¾eÄe nÃ¡sledujÃ­cÃ­ adresu.</p>
<pre><code>https://api.abalin.net/today?country=cz
</code></pre>
<p>Zkuste si pro sebe urÄit, co je zde adresa serveru, cesta a 
parametry. Podle toho, jakÃ½ je zrovna den, dostanete odpovÄ›Ä podobnou 
tÃ©to.</p>
<!-- prettier-ignore -->
<pre><code class="language-json">{<span class="hljs-attr">"data"</span>:{<span class="hljs-attr">"dates"</span>:{<span class="hljs-attr">"day"</span>:<span class="hljs-number">9</span>,<span class="hljs-attr">"month"</span>:<span class="hljs-number">5</span>},<span class="hljs-attr">"namedays"</span>:{<span class="hljs-attr">"cz"</span>:<span class="hljs-string">"Ctibor"</span>}}}
</code></pre>
<p>Server se snaÅ¾Ã­ posÃ­lat data co nejÃºspornÄ›ji a vynechÃ¡vÃ¡ v JSONu pro 
poÄÃ­taÄe zbyteÄnÃ© mezery. NaÅ¡tÄ›stÃ­ dat nenÃ­ mnoho, takÅ¾e jsou ÄitelnÃ¡ i v
 tÃ©to formÄ›.</p>
<p>VÄ›tÅ¡ina API poskytuje vÃ­ce rÅ¯znÃ½ch cest. Pro vyhledÃ¡nÃ­ jmÃ©na pro dneÅ¡nÃ­ den jsme pouÅ¾ili cestu <code>/today</code>. MÅ¯Å¾eme vÅ¡ak poloÅ¾it i obrÃ¡cenÃ½ dotaz a zeptat se, kdy mÃ¡ v Americe svÃ¡tek Suzanne. K to mu pouÅ¾ijeme cestu <code>/getdate</code> s parametry <code>name</code> a <code>country</code>.</p>
<pre><code>https://api.abalin.net/getdate?name=suzanne&amp;country=us
</code></pre>
<p>Pokud server poskytuje API, cestÃ¡m v rÃ¡mci jednoho serveru se Å™Ã­kÃ¡ <em>endpointy</em>.
 Z naÅ¡eho API pro zÃ­skÃ¡nÃ­ jsme zatÃ­m vidÄ›li dva rÅ¯znÃ© endpointy. Toto 
API jich mÃ¡ vÅ¡ak jeÅ¡tÄ› vÃ­ce. VrÃ¡tÃ­me se k nim v pÅ™Ã­kladech na 
procviÄenÃ­.</p>
<h3 id="volani-api-z-javascriptu"><a class="anchor" href="#volani-api-z-javascriptu">Â¶</a> VolÃ¡nÃ­ API z JavaScriptu</h3>
<p>VÄ›tÅ¡ina API funguje velmi pÅ™Ã­moÄaÅ™e. OdeÅ¡lete sprÃ¡vnÄ› zformulovanÃ½ 
poÅ¾adavek na nÄ›jakÃ½ endpont a server vÃ¡m poÅ¡le odpovÄ›Ä s kÃ½Å¾enÃ½mi daty 
nejÄastÄ›ji ve formÃ¡tu JSON.</p>
<p>Pokud chceme tento proces provÃ©st v JavaScriptu, mÃ¡me k dispozici velmi Å¡ikovnou metodu <code>fetch</code>. MÅ¯Å¾eme si tedy zaloÅ¾it novÃ½ program a rovnou napsat toto.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> promise = fetch(<span class="hljs-string">'https://api.abalin.net/today?country=cz'</span>);
</code></pre>
<p>Je zde vÅ¡ak drobnÃ½ zÃ¡drhel. Servery jsou rÅ¯znÄ› rychlÃ© podle toho, jak
 jsou vytÃ­Å¾enÃ© nebo jak jsou od nÃ¡s geograficky daleko. Dat ke staÅ¾enÃ© 
takÃ© mÅ¯Å¾e bÃ½t pomÄ›rnÄ› hodnÄ›. VÅ¡echny tyto faktory pÅ™ispÃ­vajÃ­ k tomu, Å¾e 
stahovÃ¡nÃ­ dat mÅ¯Å¾e trvat nÄ›jakou chvÃ­li, a my dopÅ™edu nevÃ­m, jak dlouhÃ¡ 
tato chvÃ­le bude. Dokonce se mÅ¯Å¾e stÃ¡t, Å¾e server data nakonec nepoÅ¡le 
vÅ¯bec, protoÅ¾e je pÅ™etÃ­Å¾enÃ½ poÅ¾adavky jinÃ½ch klientÅ¯, nebo dokonce ÃºplnÄ›
 spadnul a uÅ¾ nenÃ­ dostupnÃ½.</p>
<p>Kdybychom tedy v naÅ¡em programu na prvnÃ­m Å™Ã¡dku Äekali, aÅ¾ funkce <code>fetch</code> skonÄÃ­, mohli bychom si taky poÄkat notnou chvÃ­li. Mezi tÃ­m by nÃ¡Å¡ program zcela zamrznul a uÅ¾ivatel by nemÄ›l radost. Funkce <code>fetch</code> proto nevracÃ­ data, nÃ½brÅ¾ takzvanÃ½ <em>promise</em>.
 Promise je speciÃ¡lnÃ­ konstrukce podobnÃ¡ ÄasovaÄi, u kterÃ©ho vÅ¡ak 
dopÅ™edu nevÃ­m, kdy skonÄÃ­. Promise v podstatÄ› Å™Ã­kÃ¡ â€œaÅ¾ to bude, tak to 
budeâ€. Na promise mÅ¯Å¾eme povÄ›sit funkci, kterÃ¡ se mÃ¡ zavolat ve chvÃ­li, 
kdy dorazÃ­ odpovÄ›Ä od serveru. To se provede pomocÃ­ metody <code>then</code>.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> promise = fetch(<span class="hljs-string">'https://api.abalin.net/today?country=cz'</span>);
promise.then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(resp);
});
</code></pre>
<p>V parametru <code>resp</code> mÃ¡me uloÅ¾enu odpovÄ›d ze serveru. Pokud z tÃ©to odpovÄ›di chceme zÃ­skat JSON, staÄÃ­ zavolat metodu <code>json</code>. ÄŒekÃ¡ nÃ¡s vÅ¡ak podraz. Tado metoda opÄ›t nevracÃ­ samotnÃ½ JSON nÃ½brÅ¾ pouze promise. MusÃ­me tedy znova pouÅ¾Ã­t metodu <code>then</code> a vznikne nÃ¡m trochu zamotanÃ½ kÃ³d.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> respPromise = fetch(<span class="hljs-string">'https://api.abalin.net/today?country=cz'</span>);
<span class="hljs-keyword">const</span> jsonPromise = respPromise.then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> resp.json());
jsonPromise = jsonPromise.then(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(json));
</code></pre>
<p>Po spuÅ¡tÄ›nÃ­ tohoto programu uÅ¾ se nÃ¡m v konzoli objevÃ­ naÅ¡e data. KÇ’d
 vÃ½Å¡e vÅ¡ak zaÄinÃ¡ bÃ½t nepÅ™ehlednÃ½. NaÅ¡tÄ›stÃ­ se vÅ¡ak mÅ¯Å¾eme snadno 
vyhnout uklÃ¡dÃ¡nÃ­ promisÅ¯ do promÄ›nnÃ½ch, kterÃ© jsou v tomto pÅ™Ã­padÄ› 
stejnÄ› zbyteÄnÃ©. VÃ½slednÃ½ kÃ³d se pak o kus zpÅ™ehlednÃ­.</p>
<pre><code class="language-js">fetch(<span class="hljs-string">'https://api.abalin.net/today?country=cz'</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> resp.json())
  .then(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(json));
</code></pre>
<p>Tento zÃ¡pis na prvnÃ­ pohled mÅ¯Å¾e poÅ™Ã¡d vypadat sloÅ¾itÄ›. Jeho pouÅ¾itÃ­ 
je vÅ¡ak poÅ™Ã¡d stejnÃ©. StaÄÃ­ si jej tedy prostÄ› zapamatovat a zvyknout si
 na to, Å¾e â€œtakto se to prostÄ› dÄ›lÃ¡.â€ Promisy jsou relativnÄ› 
komplikovanÃ© a hlubokÃ© tÃ©ma. Nebudeme proto do nich zabÃ­hat hlubÄ›ji neÅ¾ 
je v tuto chvÃ­li nezbytnÄ› nutnÃ©.</p>
<h3 id="zpracovani-dat"><a class="anchor" href="#zpracovani-dat">Â¶</a> ZpracovÃ¡nÃ­ dat</h3>
<p>NaÅ¡e funkce pro zpracovÃ¡nÃ­ zÃ­skanÃ½ch dat je zatÃ­m pouze vypisovala do
 konzole. MÅ¯Å¾eme si vÅ¡ak napsat funkci, kterÃ¡ dÄ›lÃ¡ cokoliv chceme. Takto
 napÅ™Ã­klad mÅ¯Å¾eme zobrazÃ­m jmÃ©no majÃ­cÃ­ dnes svÃ¡tek v elementu s tÅ™Ã­dou <code>name</code>.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> displayName = <span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> nameElm = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.name'</span>);
  nameElm.textContent = json.data.namedays.cz;
};

fetch(<span class="hljs-string">'https://api.abalin.net/today?country=cz'</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> resp.json())
  .then(displayName);
</code></pre>
<p>Funkce <code>fetch</code> tedy funguje podobnÄ› jak udÃ¡lost. NaÅ¡e funkce <code>displayName</code> se zavolÃ¡ aÅ¾ ve chvÃ­li, kdy skuteÄnÄ› dorazÃ­ data ze serveru.</p>
</section> <!----><!----> <section class="article-section exercises-section"><h2 id="cviceni-volani-api" class="exrc-section-title"><a href="#cviceni-volani-api" class="anchor">Â¶</a>
          CviÄenÃ­ - volÃ¡nÃ­ API
        </h2> <!----> <div class="exercise"><div class="exercise__head"><div class="exercise__title"><div class="exercise__num">1</div> <h3 id="cvi-svatek-zitra"><a href="#cvi-svatek-zitra" class="anchor">Â¶</a>
        SvÃ¡tek zÃ­tra
      </h3></div> <div class="exercise__demand"><div class="demand demand--2"></div> <div class="demand-text">to dÃ¡Å¡</div></div></div> <div class="exercise__body">
<p>ZatÃ­m jsme z API pro zÃ­skÃ¡vÃ¡nÃ­ svÃ¡tkÅ¯ vidÄ›li endpointy <code>/today</code> a <code>/getdate</code>. ExistujÃ­ vÅ¡ak jeÅ¡tÄ› dalÅ¡Ã­.</p>
<p>NapiÅ¡te aplikaci, kterÃ¡ uÅ¾ivateli zobrazÃ­, kdo mÃ¡ svÃ¡tek zÃ­tra. K tomu pouÅ¾Ã­jte endpoint <code>/tomorrow</code>, kterÃ½ funguje podobnÄ› jako endpoint <code>/today</code>.</p>
</div></div><div class="exercise"><div class="exercise__head"><div class="exercise__title"><div class="exercise__num">2</div> <h3 id="cvi-svatek-v-den"><a href="#cvi-svatek-v-den" class="anchor">Â¶</a>
        SvÃ¡tek v den
      </h3></div> <div class="exercise__demand"><div class="demand demand--2"></div> <div class="demand-text">to dÃ¡Å¡</div></div></div> <div class="exercise__body">
<p>DalÅ¡Ã­m uÅ¾iteÄnÃ½m endpointem API pro svÃ¡tky je <code>/namedays</code>. Ten nÃ¡m umoÅ¾Åˆuje zjistit, kdo mÃ¡ svÃ¡tek v pÅ™esnÄ› urÄenÃ½ den. Tento endpoint mÃ¡ tÅ™i povinnÃ© parametry: <code>country</code>, <code>month</code> a <code>day</code>. Takto napÅ™Ã­klad zjistÃ­me, kdo mÃ¡ v ÄŒesku svÃ¡tek 13. Ãºnora.</p>
<pre><code>https://api.abalin.net/namedays?country=cz&amp;month=2&amp;day=13
</code></pre>
<p>VytvoÅ™te aplikaci, kterÃ© bude obsahovat dvÄ› textovÃ¡ polÃ­Äka a 
tlaÄÃ­tko. UÅ¾ivatel do polÃ­Äek zadÃ¡ ÄÃ­slo dne a ÄÃ­slo mÄ›sÃ­ce a po 
stisknutÃ­ tlaÄÃ­tka se mu na strÃ¡nce zobrazÃ­, kdo mÃ¡ tento den svÃ¡tek.</p>
</div></div></section><section class="article-section text-section"><h2 id="google-sheets-api"><a class="anchor" href="#google-sheets-api">Â¶</a> Google Sheets API</h2>
<p>VÄ›tÅ¡ina webovÃ½ch aplikacÃ­ potÅ™ebuje kromÄ› frontendu takÃ© backend. 
ModernÃ­ aplikace Äasto fungujÃ­ tak, Å¾e backend poskytuje API, skrze 
kterÃ© mÅ¯Å¾e frontend pÅ™istupovat k datÅ¯m aplikace. BackendovÃ© API se dÃ¡ 
napsat pÅ™Ã­mo v JavaScriptu. BohuÅ¾el je to vÅ¡ak obsÃ¡hlÃ© tÃ©ma, kterÃ© se 
nÃ¡m uÅ¾ do tohoto kurzu nevejde. VlastnÃ­ API si tedy v JavaScriptu 
bohuÅ¾el nenapÃ­Å¡eme. JednoduchÃ¡ data pro naÅ¡i aplikaci si vÅ¡ak mÅ¯Å¾eme 
uloÅ¾it napÅ™Ã­klad do Google Sheets. Ty poskytujÃ­ vlastnÃ­ API, pomocÃ­ 
kterÃ©ho mÅ¯Å¾ete ÄÃ­st i zapisovat obsah tabulek a vytvoÅ™it si tak 
jednoduchÃ½ datovÃ½ zdroj pro vÃ¡Å¡ frontend.</p>
<p>K nastavenÃ­ Google Sheets API nÃ¡sledujte kroky nÃ­Å¾e.</p>
<ol>
<li>Pokud nemÃ¡te ÃºÄet na Googlu, zaloÅ¾te si jej na <a href="https://accounts.google.com/signup">tÃ©to strÃ¡nce</a>;</li>
<li>OtevÅ™ete <a href="https://developers.google.com/sheets/api/quickstart/js">konfiguraci</a> pro Google Sheets API. V ÄÃ¡sti <i>Step 1</i> kliknÄ›te na tlaÄÃ­tko <i>Enable the Google Sheets API</i>. Pokud nejste pÅ™ihlÃ¡Å¡enÃ­ na svÅ¯j ÃºÄet, strÃ¡nka vÃ¡s vyzve k pÅ™ihlÃ¡Å¡enÃ­. Pokud vÅ¡e probÄ›hlo v poÅ™Ã¡dku, objevÃ­ se dialog s Ãºdaji <i>Client ID</i> a <i>Client Secret</i>. Pro tuto chvÃ­li mÅ¯Å¾eme dialog zavÅ™Ã­t.</li>
<li>V ÄÃ¡sti <i>Step 1</i> dÃ¡le kliknÄ›te na tlaÄÃ­tko <i>Create API Key</i>.
 ObjevÃ­ se dlouhatÃ¡nskÃ½ Å™etÄ›zec pÃ­smenek a ÄÃ­sel, pomocÃ­ kterÃ©ho budete 
moci komunikovat s Google Sheets. Tento Å™etÄ›zec si uloÅ¾te, abyste jej 
mÄ›li po ruce, aÅ¾ budete psÃ¡t vÃ¡Å¡ prvnÃ­ program.</li>
</ol>
<h3 id="cteni-z-tabulky"><a class="anchor" href="#cteni-z-tabulky">Â¶</a> ÄŒtenÃ­ z tabulky</h3>
<p>PÅ™ipomeÅˆme si naÅ¡i tabulku vÃ½dajÅ¯ z prvnÃ­ lekce.</p>
<table>
  <thead>
    <tr><th>JmÃ©no</th><th>VÄ›c</th><th>ÄŒÃ¡stka</th></tr>
  </thead>
  <tbody>
    <tr><td>Petr</td><td>PracÃ­ prÃ¡Å¡ek</td><td>240 kÄ</td></tr>
    <tr><td>Ondra</td><td>Savo</td><td>80 kÄ</td></tr>
    <tr><td>Pavla</td><td>ToaleÅ¥Ã¡k</td><td>65 kÄ</td></tr>
    <tr><td>Zuzka</td><td>MÃ½dlo</td><td>50 kÄ</td></tr>
    <tr><td>Pavla</td><td>ZÃ¡vÄ›s do koupelny</td><td>350 kÄ</td></tr>
    <tr><td>Libor</td><td>Pivka na kolaudaÄku</td><td>124 kÄ</td></tr>
    <tr><td>Petr</td><td>Pytle na odpadky</td><td>75 kÄ</td></tr>
    <tr><td>MÃ­Å¡a</td><td>UtÄ›rky na nÃ¡dobÃ­</td><td>130 kÄ</td></tr>
    <tr><td>Ondra</td><td>ToaleÅ¥Ã¡k</td><td>120 kÄ</td></tr>
    <tr><td>MÃ­Å¡a</td><td>PeÄÃ­cÃ­ papÃ­r</td><td>30 kÄ</td></tr>
    <tr><td>Zuzka</td><td>Savo</td><td>80 kÄ</td></tr>
    <tr><td>Petr</td><td>Tapeta na zÃ¡chod</td><td>315 kÄ</td></tr>
    <tr><td>Ondra</td><td>ToaleÅ¥Ã¡k</td><td>64 kÄ</td></tr>
  </tbody>
</table>
<ol>
<li>ZamiÅ™te na adresu <a href="http://sheets.google.com/">http://sheets.google.com</a> a vytvoÅ™te novou Google Sheets tabulku. Dajte jÃ­ nÃ¡zev <i>VÃ½daje</i>
 a zkopÃ­rujte do nÃ­ tabulku vÃ½dajÅ¯ z tÃ©to strÃ¡nky. StaÄÃ­ vybrat vÅ¡echny 
Å™Ã¡dky (kromÄ› hlaviÄky) zde na strÃ¡nce a pak je vloÅ¾it do Google tabulky 
pomocÃ­ <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>V</kbd>.</li>
<li>Aby byla tabulka pÅ™Ã­stupnÃ¡ pro vÃ¡Å¡ program, musÃ­te ji nastavit jako veÅ™ejnou. V pravÃ©m hornÃ­m rohu kliknÄ›te na tlaÄÃ­ko <i>SdÃ­let</i>, vyberte <i>ZÃ­skat odkaz</i> a z nabÃ­dky vyberte <i>VÅ¡ichni uÅ¾ivatelÃ©, kteÅ™Ã­ majÃ­ odkaz</i>. NynÃ­ si mÅ¯Å¾ete odkaz zkopÃ­rovat do schrÃ¡nky a kliknout na <i>Hotovo</i>.</li>
<li>V levÃ© dolnÃ­ ÄÃ¡sti uvidÃ­te nÃ¡zev listu tabulky, kterÃ½ pravdÄ›podobnÄ› znÃ­ <i>List 1</i>. Å ipkou vedle nÃ¡zvu listu rozbalte menu a vyberte <i>PÅ™ejmenovat</i>. JmÃ©no nastavte na <i>List1</i>. Mezery v nÃ¡zvech listÅ¯ jsou neÅ¡ikovnÃ© a je lepÅ¡Ã­ se jich zbavit.</li>
</ol>
<p>NynÃ­ mÅ¯Å¾eme zkusit naÄÃ­st naÅ¡i tabulku z JavaScriptovÃ©ho programu. 
NejdÅ™Ã­ve musÃ­me znÃ¡t identifikÃ¡tor tabulky. Ten najdete v odkazu pro 
sdÃ­lenÃ­, kterÃ½ jste si zkopÃ­rovali do schrÃ¡nky. Odkaz bude vypadat nÄ›jak
 takto.</p>
<pre><code>https://docs.google.com/spreadsheets/d/1_GQOBk3o7il-ZHam-yj1gFCZvoZdMe2kv8guk061tK8/edit?usp=sharing
</code></pre>
<p>IdentifikÃ¡tor ja pak tento Å™etÄ›zec.</p>
<pre><code>1_GQOBk3o7il-ZHam-yj1gFCZvoZdMe2kv8guk061tK8
</code></pre>
<p>DÃ¡le potÅ™ebujete znÃ¡t vÃ¡Å¡ API klÃ­Ä. Z tÄ›chto informacÃ­ uÅ¾ mÅ¯Å¾eme sestavit adresu naÅ¡eho API endpointu pro funkci <code>fetch</code>.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> API_KEY = <span class="hljs-string">'ALzaSyBfd-ebCiXVE-iwss6S4ZBj15WN651ynQU'</span>;
<span class="hljs-keyword">const</span> spreadsheetId = <span class="hljs-string">'1_GQOBk3o7il-ZHam-yj1gFCZvoZdMe2kv8guk061tK8'</span>;
<span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://sheets.googleapis.com/v4/spreadsheets/<span class="hljs-subst">${spreadsheetId}</span>/values/List1?key=<span class="hljs-subst">${API_KEY}</span>`</span>;

fetch(url)
  .then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> resp.json())
  .then(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(json));
</code></pre>
<p>Pokud v tomto programu nahradÃ­te prvnÃ­ dvÄ› promÄ›nnÃ© za vaÅ¡e Ãºdaje a 
pokud jste tabulku vytvoÅ™ili sprÃ¡vnÄ›, uvidÃ­te v konzoli takovouto 
odpovÄ›Ä.</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"range"</span>: <span class="hljs-string">"List1!A1:Z1000"</span>,
  <span class="hljs-attr">"majorDimension"</span>: <span class="hljs-string">"ROWS"</span>,
  <span class="hljs-attr">"values"</span>: [
    [<span class="hljs-string">"Petr"</span>, <span class="hljs-string">"PracÃ­ prÃ¡Å¡ek"</span>, <span class="hljs-string">"240 kÄ"</span>],
    [<span class="hljs-string">"Ondra"</span>, <span class="hljs-string">"Savo"</span>, <span class="hljs-string">"80 kÄ"</span>],
    [<span class="hljs-string">"Pavla"</span>, <span class="hljs-string">"ToaleÅ¥Ã¡k"</span>, <span class="hljs-string">"65 kÄ"</span>],
    [<span class="hljs-string">"Zuzka"</span>, <span class="hljs-string">"MÃ½dlo"</span>, <span class="hljs-string">"50 kÄ"</span>],
    [<span class="hljs-string">"Pavla"</span>, <span class="hljs-string">"ZÃ¡vÄ›s do koupelny"</span>, <span class="hljs-string">"350 kÄ"</span>],
    [<span class="hljs-string">"Libor"</span>, <span class="hljs-string">"Pivka na kolaudaÄku"</span>, <span class="hljs-string">"124 kÄ"</span>],
    [<span class="hljs-string">"Petr"</span>, <span class="hljs-string">"Pytle na odpadky"</span>, <span class="hljs-string">"75 kÄ"</span>],
    [<span class="hljs-string">"MÃ­Å¡a"</span>, <span class="hljs-string">"UtÄ›rky na nÃ¡dobÃ­"</span>, <span class="hljs-string">"130 kÄ"</span>],
    [<span class="hljs-string">"Ondra"</span>, <span class="hljs-string">"ToaleÅ¥Ã¡k"</span>, <span class="hljs-string">"120 kÄ"</span>],
    [<span class="hljs-string">"MÃ­Å¡a"</span>, <span class="hljs-string">"PeÄÃ­cÃ­ papÃ­r"</span>, <span class="hljs-string">"30 kÄ"</span>],
    [<span class="hljs-string">"Zuzka"</span>, <span class="hljs-string">"Savo"</span>, <span class="hljs-string">"80 kÄ"</span>],
    [<span class="hljs-string">"Petr"</span>, <span class="hljs-string">"Tapeta na zÃ¡chod"</span>, <span class="hljs-string">"315 kÄ"</span>],
    [<span class="hljs-string">"Ondra"</span>, <span class="hljs-string">"ToaleÅ¥Ã¡k"</span>, <span class="hljs-string">"64 kÄ"</span>]
  ]
}
</code></pre>
<p>TÃ­mto zpÅ¯sobem mÅ¯Å¾ete snadno vytvoÅ™it zdroj dat pro vaÅ¡i frontendovou aplikaci.</p>
<h3 id="zapis-do-tabulky"><a class="anchor" href="#zapis-do-tabulky">Â¶</a> ZÃ¡pis do tabulky</h3>
<p>Z Google Sheets lze pomocÃ­ API data nejen ÄÃ­st ale i zapisovat. Zde 
nÃ¡Å¡ vÅ¡ak ÄekÃ¡ zklamÃ¡nÃ­. Google Sheets pro zÃ¡pis do tabulek vyÅ¾adujÃ­ 
vyÅ¡Å¡Ã­ ÃºroveÅˆ zabezpeÄenÃ­. PrÃ¡ce s takto zabezpeÄenou tabulkou vÅ¡ak 
znamenÃ¡ provÃ©st mnoho technickÃ½ch krokÅ¯ navÃ­c, na coÅ¾ v tÃ©to lekci 
nemÃ¡me prostor.</p>
<p>Napsat aplikaci, kterÃ¡ nÄ›kam posÃ­lÃ¡ data se nÃ¡m tedy pomocÃ­ Google 
Sheets napsat nepodaÅ™Ã­. K tomu bychom uÅ¾ potÅ™ebovali skuteÄnÃ© vlastnÃ­ 
API. Pokud vÅ¡ak naÅ¡e aplikace data pouze zobrazuje, jsou Google Sheets 
velmi Å¡ikovnÃ¡ volba.</p>
<h2 id="zapis-pomoci-api"><a class="anchor" href="#zapis-pomoci-api">Â¶</a> ZÃ¡pis pomocÃ­ API</h2>
<p>Google Sheets API je sice pro zapisovÃ¡nÃ­ pÅ™Ã­liÅ¡ nÃ¡roÄnÃ©, avÅ¡ak 
pouÅ¾Ã­vat nÄ›jakÃ© API k zapisovÃ¡nÃ­ dat je bÄ›Å¾nÃ¡ vÄ›c. ZatÃ­m jsme na vÅ¡echna
 naÅ¡e API posÃ­lali poÅ¾adavek, aby nÃ¡m server nÄ›jakÃ¡ dat poslal. TÄ›mto 
poÅ¾adavkÅ¯m se ve webovÃ© hantÃ½rce Å™Ã­kÃ¡ GET, tedy nÄ›co jako â€œzÃ­skatâ€. 
Pokud chce naopak nÄ›co my odeslat na server, pouÅ¾ijeme poÅ¾adavek POST.</p>
</section> <!----><!----> <section class="article-section exercises-section"><h2 id="cviceni-zapis-pomoci-api" class="exrc-section-title"><a href="#cviceni-zapis-pomoci-api" class="anchor">Â¶</a>
          CviÄenÃ­ - zÃ¡pis pomocÃ­ API
        </h2> <!----> <div class="exercise"><div class="exercise__head"><div class="exercise__title"><div class="exercise__num">3</div> <h3 id="cvi-chat"><a href="#cvi-chat" class="anchor">Â¶</a>
        Chat
      </h3></div> <div class="exercise__demand"><div class="demand demand--3"></div> <div class="demand-text">zapni hlavu</div></div></div> <div class="exercise__body">
<ol>
<li>VytvoÅ™te si repozitÃ¡Å™ ze Å¡ablony stejnÄ› jako to dÄ›lÃ¡me s Ãºkoly. Odkaz na pÅ™ijetÃ­ zadÃ¡nÃ­ najdete na <a href="https://classroom.github.com/a/dKpD9cWy">classroom.github.com/a/dKpD9cWy</a>.</li>
<li>ProhlÃ©dnÄ›te si soubor <code>index.html</code>. StrÃ¡nka je nastylovanÃ¡ pomocÃ­ <a href="https://getbootstrap.com/">Bootstrapu</a>. Nejsou potÅ™eba Å¾Ã¡dnÃ© dalÅ¡Ã­ CSS. VÅ¡imnÄ›te si formulÃ¡Å™ovÃ½ch inputÅ¯ <code>#name-input</code> a <code>#message-input</code>, elementu <code>#messages</code>, se kterÃ½mi budete pozdÄ›ji pracovat. Pro splnÄ›nÃ­ zadÃ¡nÃ­ staÄÃ­ upravovat pouze soubor <code>index.js</code>.</li>
<li>Upravte soubor <code>index.js</code> tak, aby strÃ¡nka zobrazovala nejnovÄ›jÅ¡Ã­ zprÃ¡vy z api.
<ol>
<li>DoplÅˆte tÄ›lo funkce <code>renderMessage</code>. JejÃ­m Ãºkolem bude vracet HTML jednÃ© zprÃ¡vy podle pÅ™edlohy, kterou najdete v <code>index.html</code>. SprÃ¡vnÃ© chovÃ¡nÃ­ mÅ¯Å¾ete vyzkouÅ¡et napÅ™Ã­klad vÃ½pisem do konzole pomocÃ­ <code>console.log(renderMessage('Pavel', 'Ahoj ğŸ‘‹', '11. 5. 2020 17:30:00'))</code>.</li>
<li>DopiÅ¡te funkci <code>renderMessages</code>, aÅ¥ pomocÃ­ for smyÄky zavolÃ¡ pro kaÅ¾dou zprÃ¡vu <code>renderMessage</code> a pÅ™idÃ¡ ji do elementu s id <code>messages</code>. NezapomeÅˆte obsah <code>#messages</code> nejdÅ™Ã­ve vyÄistit, jinak se vÃ¡m zprÃ¡vy budou Äasem opakovat.</li>
<li>VyzkouÅ¡ejte, Å¾e volÃ¡nÃ­ pÅ™idÃ¡vÃ¡ zprÃ¡vy do strÃ¡nky.<pre><code class="language-js">renderMessages([
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Pavel'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Ahoj ğŸ‘‹'</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">'11. 5. 2020 17:30:00'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Martina'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Ja se mÃ¡te?'</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">'11. 5. 2020 17:29:54'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Michal'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Nazdar'</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">'12. 5. 2020 12:17:21'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Ivana'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Ahoj'</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">'12. 5. 2020 11:02:15'</span> },
]);
</code></pre>
</li>
<li>PomocÃ­ zabudovanÃ© funkce <code>fetch</code> stÃ¡hnÄ›te uvnitÅ™ <code>updateMessages</code> zprÃ¡vy z api. UkÃ¡zkovÃ½ kÃ³d najdete v <a href="https://czechichat.herokuapp.com/documentation/">dokumentaci</a>. ZprÃ¡vy pÅ™es <code>renderMessages(data.messages)</code> zobrazte na strÃ¡nce. MÄ›ly by se vÃ¡m ukÃ¡zat minimÃ¡lnÄ› dvÄ›.</li>
</ol>
</li>
<li>Upravte soubor <code>index.js</code> tak, aby formulÃ¡Å™ pomocÃ­ api odesÃ­lal novÃ© zprÃ¡vy na server.
<ol>
<li>DoplÅˆte funkci <code>onSubmit</code>, kterÃ¡ pÅ™i uloÅ¾enÃ­ formulÃ¡Å™e odeÅ¡le jmÃ©no a text z inputÅ¯.</li>
<li>Pozdravte ostatnÃ­ v chatu. VyplÅˆte na strÃ¡nce polÃ­Äko pro vaÅ¡e jmÃ©no a zprÃ¡vu textem â€Ahojâ€œ. OdeÅ¡lete.</li>
</ol>
</li>
</ol>
</div></div></section><!----> <section class="article-section exercises-section"><h2 id="dobrovolne-ulozky-na-doma" class="exrc-section-title"><a href="#dobrovolne-ulozky-na-doma" class="anchor">Â¶</a>
          DobrovolnÃ© ÃºloÅ¾ky na doma
        </h2> <!----> <div class="exercise"><div class="exercise__head"><div class="exercise__title"><div class="exercise__num">4</div> <h3 id="cvi-lepsi-chat"><a href="#cvi-lepsi-chat" class="anchor">Â¶</a>
        LepÅ¡Ã­ chat
      </h3></div> <div class="exercise__demand"><div class="demand demand--3"></div> <div class="demand-text">zapni hlavu</div></div></div> <div class="exercise__body">
<ol>
<li>VychÃ¡zejte z pÅ™edchozÃ­ <a href="#cvi-chat">Ãºlohy</a>.</li>
<li>VymaÅ¾te polÃ­Äko na zadÃ¡vÃ¡nÃ­ textu zprÃ¡vy po jeho odeslÃ¡nÃ­.</li>
<li>ZabraÅˆte dvojÃ­mu odeslÃ¡nÃ­ formulÃ¡Å™e, pokud uÅ¾ivatel omylem dvakrÃ¡t za sebou rychle klikne na <code>Odeslat</code>.</li>
<li>PÅ™idejte do strÃ¡nky CSS, kterÃ© problikne Å¾lutÄ› vÅ¡emi zprÃ¡vami pÅ™i kaÅ¾dÃ©m renderu. VyÅ¾aduje Ãºpravu <code>index.html</code>.<pre><code class="language-css">&lt;style&gt;
    @keyframes new-message {
        0% {
            background-color: #ffffd3;
        }
    }
    .card {
        animation: new-message 1s;
    }
&lt;/style&gt;
</code></pre>
</li>
<li>PÅ™i pÅ™ijÃ­mÃ¡nÃ­ zprÃ¡v sledujte hodnotu <code>lastUpdate</code>, kterou posÃ­lÃ¡ server spoleÄnÄ› s <code>messages</code>. Volejte <code>renderMessages</code> jen pÅ™i zmÄ›nÄ› <code>lastUpdate</code>. Server mÄ›nÃ­ tuto hodnotu pouze pÅ™i pÅ™ijetÃ­ novÃ© zprÃ¡vy.</li>
</ol>
</div></div></section></div></article></div></main> <footer class="footer"><div class="container">Martin PodlouckÃ½</div></footer></div>
  

</body></html>